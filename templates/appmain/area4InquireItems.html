{% load static %}

<script src="{% static 'js/appmain.js' %}"></script>

<div>
    {% if "NG" in alert %}
        <div class="alert alert-danger alert-dismissible fade show" role="alert">
            {{ alert }}
        <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
    </div>
    {% else %}
    {% endif %}
</div>

<div class="table-responsive">
    <table class="table table-hover table-dark mt-2">
        <thead>
            <tr>
                <th >#</th>

                {% if command == "show_the_first_item" or command == "show_items_updated_today" or command == "show_items_updated_in_a_week" or command == "show_all_the_items" %}
                    <th>...</th>
                {% elif command == "show_signup_users" or command == "delete_user" %}
                    <th>...</th>
                {% endif %}

                {% for key in keys %}
                    <th>{{ key }}</th>
                {% endfor %}
             </tr>
        </thead>

        {% for item in items%}
            <tbody>
                <tr>
                    <td> {{ item.0 }} </td><!-- # -->

                    {% if command == "show_the_first_item" or command == "show_items_updated_today" or command == "show_items_updated_in_a_week" or command == "show_all_the_items" %}
                        <td>
                            <div class="tab-pane fade show" role="tabpanel">
                                <div class="form-group row">
                                    <div class="col">
                                        <li class="nav-item dropdown">
                                            <button class="btn btn-dark dropdown-toggle" id="resultDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">...</button>

                                            <div class="dropdown-menu" aria-labelledby="resultDropdown">
                                                <a class="btn_result dropdown-item" href="#" id="delete_item" value1="{{ selected_form }}" value2="{{ groupname }}" value3="{{ item }}" >Delete this item</a>
                                            </div>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </td>

                    {% elif command == "show_signup_users" or command == "delete_user" %}
                        <td>
                            <div class="tab-pane fade show" role="tabpanel">
                                <div class="form-group row">
                                    <div class="col">
                                        <li class="nav-item dropdown">
                                            <button class="btn btn-dark dropdown-toggle" id="resultDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">...</button>

                                            <div class="dropdown-menu" aria-labelledby="resultDropdown">
                                                <a class="btn_result dropdown-item" href="#" id="delete_user" value1="{{ selected_form }}" value2="{{ groupname }}" value3="{{ item }}" >Delete this user</a>
                                            </div>
                                        </li>
                                    </div>
                                </div>
                            </div>
                        </td>
                    {% endif %}

                    {% for itm in item|slice:"1:" %}
                        <td> {{ itm }} </td>
                    {% endfor %}
                </tr>
            </tbody>
        {% endfor %}

    </table>
</div>
